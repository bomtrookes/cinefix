<div class="movie-cover" style="background: linear-gradient(180deg,rgba(20,24,28,0) 0,rgba(20,24,28,0) 50%,rgba(20,24,28,.75) 75%,#14181c),url(https://www.themoviedb.org/t/p/w1920_and_h1080_bestv2<%= @movie.backdrop_path %>) center/cover no-repeat">
    <% if user_signed_in? && current_user.ratings.exclude?(@movie.id) %>
      <div id="rating" data-controller="modal">
        <i class="bi bi-three-dots btn btn-dark" data-action="click->modal#open"></i>
        <%= render "modal" %>
      </div>
    <% end %>
</div>

<section class="film__header d-flex justify-content-between p-2">
  <div>
    <h1><%= @movie.title %></h1>
    <small><%= format_date(@movie.release_date) %> | DIRECTED BY</small>
      <div class="mb-2">
        <% @tmdb_crew.each do |crew| %>
          <% if crew.job == "Director" %>
            <%= crew.name %><br>
          <% end %>
        <% end %>
      </div>
  </div>
  <img src="https://www.themoviedb.org/t/p/w600_and_h900_bestv2<%= @movie.poster_path %>" alt="" class="poster-show">
</section>

<section class="p-2">
  <% if @movie.tagline %>
    <strong><%= @movie.tagline.upcase %></strong>
  <% end %>
  <p><%= @movie.overview %></p>
</section>


<div data-controller="tabs">
  <header class="movie-options">
    <small id="cast-tab" data-action="click->tabs#showCast">Cast</small>
    <small id="crew-tab" data-action="click->tabs#showCrew">Crew</small>
    <small id="genre-tab" data-action="click->tabs#showGenres">Genres</small>
  </header>

  <section class="genres" data-tabs-target="genres">
    <h4>Genres</h4>
      <% @movie.genres.each do |genre| %>
        <%= genre.name %>
      <% end %>
  </section>

  <section class="cast" data-tabs-target="cast">
    <% @tmdb_cast.each do |cast| %>
      <div class="person-card">
        <img class="person-round" src="https://www.themoviedb.org/t/p/w276_and_h350_face/<%= cast.profile_path %>" alt="" loading="lazy">
        <p>
        <span><%= cast.name %></span><br>
        <%= cast.character %>
        </p>
      </div>
    <% end %>
  </section>

  <section class="crew" data-tabs-target="crew">
    <% @tmdb_crew.each do |crew| %>
      <div class="person-card">
        <img class="person-round" src="https://www.themoviedb.org/t/p/w276_and_h350_face/<%= crew.profile_path %>" alt="" loading="lazy">
        <p>
        <span><%= crew.name %></span><br>
        <%= crew.job %>
        </p>
      </div>
    <% end %>
  </section>
</div>
